<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>T-Gel Daily Tracker</title>
  <style>
    :root { --bg:#0b0c10; --card:#15171c; --ink:#e9edf1; --muted:#9ba3ae; --accent:#6ee7ff; --accent2:#a78bfa; }
    *{box-sizing:border-box} body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto; background:var(--bg); color:var(--ink);} 
    .wrap{max-width:1000px;margin:32px auto;padding:0 16px}
    h1{font-size:28px;margin:0 0 6px} .sub{color:var(--muted);font-size:14px;margin-bottom:16px}
    .tabs{display:flex;gap:10px;margin:16px 0 20px} .tabs button{background:#1c1f26;border:1px solid #2a2f38;color:var(--ink);padding:10px 14px;border-radius:12px;cursor:pointer}
    .tabs button.active{border-color:var(--accent); box-shadow:0 0 0 2px rgba(110,231,255,.15) inset}
    .card{background:var(--card); border:1px solid #2a2f38; border-radius:16px; padding:18px; box-shadow:0 6px 20px rgba(0,0,0,.25)}
    .grid{display:grid; gap:14px; grid-template-columns:repeat(2,minmax(0,1fr))}
    @media (max-width:760px){ .grid{grid-template-columns:1fr} }
    label{display:block; font-size:13px; color:var(--muted); margin-bottom:6px}
    input[type="date"], select, textarea{width:100%; background:#0f1116; color:var(--ink); border:1px solid #2a2f38; border-radius:12px; padding:10px 12px}
    textarea{min-height:80px}
    .row{display:flex; gap:10px; align-items:center}
    .btn{background:linear-gradient(135deg,var(--accent),var(--accent2)); color:#001018; border:0; padding:10px 14px; border-radius:12px; font-weight:600; cursor:pointer}
    .btn.outline{background:none; border:1px solid #2a2f38; color:var(--ink)}
    .small{font-size:12px;color:var(--muted)}
    .flag{display:flex; align-items:center; justify-content:space-between; border:1px solid #2a2f38; border-radius:12px; padding:10px 12px}
    .switch{appearance:none;width:40px;height:24px;background:#2a2f38;border-radius:999px;position:relative;outline:none;cursor:pointer}
    .switch:checked{background:var(--accent)}
    .switch::after{content:""; position:absolute; top:3px; left:3px; width:18px; height:18px; background:#0b0c10; border-radius:50%; transition:.18s}
    .switch:checked::after{left:19px}
    .controls{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px}
    .chartCard{background:var(--card);border:1px solid #2a2f38;border-radius:16px;padding:12px}
    .hstack{display:flex;gap:10px;align-items:center}
    .tag{background:#1c1f26;border:1px solid #2a2f38;border-radius:999px;padding:6px 10px;font-size:12px;color:var(--muted)}
  </style>
  <!-- React + Recharts via CDN -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/recharts/umd/Recharts.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
  <div class="wrap">
    <h1>T-Gel Daily Tracker</h1>
    <div class="sub">AFAB · age 43 · 1 pump/day gel · data saved locally (export CSV for your doctor)</div>
    <div id="app"></div>
  </div>

  <script type="text/babel">
    const { useEffect, useState } = React;
    const { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } = Recharts;
    const STORAGE_KEY = 'tgel-tracker-entries-v1';
    const todayISO = () => { const d = new Date(); const off = d.getTimezoneOffset(); return new Date(d.getTime() - off*60000).toISOString().slice(0,10); };
    const useLocalEntries = () => { const [entries, setEntries] = useState([]); useEffect(()=>{ try{ const raw=localStorage.getItem(STORAGE_KEY); if(raw) setEntries(JSON.parse(raw)); }catch{} },[]); useEffect(()=>{ try{ localStorage.setItem(STORAGE_KEY, JSON.stringify(entries)); }catch{} },[entries]); return [entries, setEntries]; };
    const emptyEntry = (dateStr=todayISO()) => ({ date: dateStr, mood: 3, libido: 3, appetite: '', energy: 3, sleep: 3, bottomGrowth: false, skin: '', voice: false, period: '', notes: '' });
    const Slider = ({value,onChange}) => (<input type="range" min="1" max="5" step="1" value={value} onChange={e=>onChange(Number(e.target.value))} />);

    function App(){
      const [tab, setTab] = useState('daily');
      const [entries, setEntries] = useLocalEntries();
      const [entry, setEntry] = useState(emptyEntry());
      const saveEntry = () => { setEntries(prev => { const others = prev.filter(p=>p.date!==entry.date); return [...others, entry].sort((a,b)=>a.date<b.date?-1:1); }); alert('Saved!'); };
      const chartData = entries.map(e=>({ date: e.date, mood:e.mood, libido:e.libido, energy:e.energy, sleep:e.sleep }));

      return (
        <div>
          <div class="tabs">
            <button class={tab==='daily'?'active':''} onClick={()=>setTab('daily')}>Daily Entry</button>
            <button class={tab==='overview'?'active':''} onClick={()=>setTab('overview')}>Overview</button>
          </div>

          {tab==='daily' && (
            <div class="card grid">
              <div><label>Date</label><input type="date" value={entry.date} onChange={e=>setEntry({...entry, date:e.target.value})} /></div>
              <div><label>Mood</label><Slider value={entry.mood} onChange={n=>setEntry({...entry, mood:n})} /></div>
              <div><label>Libido</label><Slider value={entry.libido} onChange={n=>setEntry({...entry, libido:n})} /></div>
              <div><label>Energy</label><Slider value={entry.energy} onChange={n=>setEntry({...entry, energy:n})} /></div>
              <div><label>Sleep</label><Slider value={entry.sleep} onChange={n=>setEntry({...entry, sleep:n})} /></div>
              <div><label>Appetite</label><input value={entry.appetite} onChange={e=>setEntry({...entry, appetite:e.target.value})} /></div>
              <div><label>Notes</label><textarea value={entry.notes} onChange={e=>setEntry({...entry, notes:e.target.value})}></textarea></div>
              <div class="row"><button class="btn" onClick={saveEntry}>Save</button></div>
            </div>
          )}

          {tab==='overview' && (
            <div class="card">
              <ResponsiveContainer width="100%" height={300}>
                <LineChart data={chartData}>
                  <CartesianGrid strokeDasharray="3 3" />
                  <XAxis dataKey="date" /><YAxis /><Tooltip />
                  <Line type="monotone" dataKey="mood" stroke="#6ee7ff" />
                  <Line type="monotone" dataKey="libido" stroke="#a78bfa" />
                </LineChart>
              </ResponsiveContainer>
            </div>
          )}
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('app')).render(<App />);
  </script>
</body>
</html>
